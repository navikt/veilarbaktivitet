create table AKTIVITET_TYPE
(
  AKTIVITET_TYPE_KODE NVARCHAR2(255) not null
    constraint AKTIVITET_TYPE_PK
    primary key,
  AKTIVITET_TYPE_BESKRIVELSE NVARCHAR2(255) not null,
  OPPRETTET_DATO TIMESTAMP(6) not null,
  OPPRETTET_AV NVARCHAR2(255) not null,
  ENDRET_DATO TIMESTAMP(6),
  ENDRET_AV NVARCHAR2(255)
);

create table AKTIVITET_LIVSLOPSTATUS
(
  AKTIVITET_LIVSLOP_KODE NVARCHAR2(255)
    constraint AKTIVITET_LIVSLOP_PK
    primary key,
  AKTIVITET_LIVSLOP_BESKRIVELSE NVARCHAR2(255) not null,
  OPPRETTET_DATO TIMESTAMP(6) not null,
  OPPRETTET_AV NVARCHAR2(255) not null,
  ENDRET_DATO TIMESTAMP(6),
  ENDRET_AV NVARCHAR2(255)
);

create table ETIKETT
(
  ETIKETT_KODE NVARCHAR2(255) not null
    constraint ETIKETT_PK
    primary key,
  ETIKETT_BESKRIVELSE NVARCHAR2(255) not null,
  OPPRETTET_DATO TIMESTAMP(6) not null,
  OPPRETTET_AV NVARCHAR2(255) not null,
  ENDRET_DATO TIMESTAMP(6),
  ENDRET_AV NVARCHAR2(255)
);


create table TRANSAKSJONS_TYPE
(
  TRANSAKSJONS_TYPE_KODE NVARCHAR2(255) not null
    constraint TRANSAKSJONS_TYPE_PK
    primary key,
  TRANSAKSJONS_TYPE_BESKRIVELSE NVARCHAR2(255) not null,
  OPPRETTET_DATO TIMESTAMP(6) not null,
  OPPRETTET_AV NVARCHAR2(255) not null,
  ENDRET_DATO TIMESTAMP(6),
  ENDRET_AV NVARCHAR2(255)
);

create table AKTIVITET
(
  AKTIVITET_ID NUMBER(19) not null,
  VERSJON NUMBER(19) default 0 not null,
  TRANSAKSJONS_TYPE NVARCHAR2(255) not null
    CONSTRAINT TRANSAKSJON_TYPE_FK
    REFERENCES TRANSAKSJONS_TYPE,
  AKTOR_ID NVARCHAR2(255),
  TITTEL NVARCHAR2(255),
  TYPE NVARCHAR2(255) not null
    CONSTRAINT AKTIVITET_TYPE_FK
    REFERENCES AKTIVITET_TYPE,
  AVSLUTTET_DATO TIMESTAMP(6),
  AVSLUTTET_KOMMENTAR NVARCHAR2(255),
  LAGT_INN_AV NVARCHAR2(255),
  FRA_DATO TIMESTAMP(6),
  TIL_DATO TIMESTAMP(6),
  LENKE NVARCHAR2(2000),
  OPPRETTET_DATO TIMESTAMP(6),
  ENDRET_DATO TIMESTAMP(6),
  STATUS NVARCHAR2(255) not null
    CONSTRAINT AKTIVITET_LIVSLOPSTATUS_FK
    REFERENCES AKTIVITET_LIVSLOPSTATUS,
  BESKRIVELSE CLOB,
  AVTALT NUMBER(1) default 0 not null,
  HISTORISK NUMBER(1) default 0 not null,
  TRANSAKSJONSTYPE NVARCHAR2(255) not null,
  GJELDENDE NUMBER(1) default 0 not null,
  CONSTRAINT AKTIVITET_PK PRIMARY KEY (AKTIVITET_ID, VERSJON)
);

create index AKTIVITET_AKTOR_IDX on AKTIVITET (AKTOR_ID);
create SEQUENCE AKTIVITET_ID_SEQ start with 1 INCREMENT BY 1;

create table EGENAKTIVITET
(
  AKTIVITET_ID NUMBER(19),
  VERSJON NUMBER(19) default 0 not null,
  HENSIKT NVARCHAR2(255),
  OPPFOLGING NVARCHAR2(255),
  CONSTRAINT EGENAKTIVITET_FK FOREIGN KEY (AKTIVITET_ID, VERSJON) REFERENCES AKTIVITET
);
create index EGENAKTIVITET_FK on EGENAKTIVITET (AKTIVITET_ID);

create table SOKEAVTALE
(
  AKTIVITET_ID NUMBER(19),
  VERSJON NUMBER(19) default 0 not null,
  ANTALL NUMBER(19),
  AVTALE_OPPFOLGING CLOB,
  CONSTRAINT SOKEAVTALE_FK FOREIGN KEY (AKTIVITET_ID, VERSJON) REFERENCES AKTIVITET
);
create index SOKEAVTALE_AKTIVITET_IDX on SOKEAVTALE (AKTIVITET_ID);

create table STILLINGSSOK
(
  AKTIVITET_ID NUMBER(19),
  VERSJON NUMBER(19) default 0 not null,
  ARBEIDSGIVER NVARCHAR2(255),
  STILLINGSTITTEL NVARCHAR2(255),
  KONTAKTPERSON NVARCHAR2(255),
  ETIKETT NVARCHAR2(255)
    CONSTRAINT ETIKETT_FK
    REFERENCES ETIKETT,
  ARBEIDSSTED NVARCHAR2(255),
  CONSTRAINT STILLINGSSOK_AKTIVITET_FK FOREIGN KEY (AKTIVITET_ID, VERSJON) REFERENCES AKTIVITET
);
create index STILLINGSSOK_AKTIVITET_IDX on STILLINGSSOK (AKTIVITET_ID);
